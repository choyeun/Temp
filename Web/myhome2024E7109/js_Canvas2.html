<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>js_그림판 만들기</title>
</head>
<body onload="init()">

<h1>JavaScript - 그림판 만들기</h1>

<ul>
    <li>1. canvas는 HTML5 요소입니다.</li>
    <li>2. canvas는 그래픽을 그리는 요소입니다.</li>
    <li>3. canvas는 JavaScript로 그래픽을 그립니다.</li>
    <li>4. canvas는 그래픽을 그리기 위한 메서드를 제공합니다.</li>
</ul>

<hr>

<h2>canvas 실행 전 코드</h2>

<xmp>
    <div id="toolbar">
        <label for="colorPicker">색상:</label>
        <input type="color" id="colorPicker" value="#000000">
        <label for="lineWidth">선 굵기:</label>
        <input type="range" id="lineWidth" min="1" max="10" value="2">
        <button onclick="clearCanvas()">지우기</button>
    </div>

    <canvas id="myCanvas" style="background-color:aliceblue" width="400" height="300"></canvas>
    <script>
        var canvas, context;
        function init() {
            canvas = document.getElementById("myCanvas");
            context = canvas.getContext("2d");

            context.lineWidth = 2;
            context.strokeStyle = "#000000";

            document.getElementById('colorPicker').addEventListener('change', function(e) {
                context.strokeStyle = e.target.value;
            });

            document.getElementById('lineWidth').addEventListener('input', function(e) {
                context.lineWidth = e.target.value;
            });

            canvas.addEventListener("mousemove", move, false);
            canvas.addEventListener("mousedown", down, false);
            canvas.addEventListener("mouseup", up, false);
            canvas.addEventListener("mouseout", out, false);
            canvas.addEventListener("touchmove", touchMove, false);
            canvas.addEventListener("touchstart", touchDown, false);
            canvas.addEventListener("touchend", touchUp, false);
        }

        var startX = 0, startY = 0;
        var dragging = false;
        function draw(curX, curY) {
            context.beginPath();
            context.moveTo(startX, startY);
            context.lineTo(curX, curY);
            context.stroke();
            startX = curX; startY = curY;
        }
        function down(e) {
            startX = e.offsetX; startY = e.offsetY; dragging = true;
        }
        function up(e) { dragging = false; }
        function move(e) {
            if (!dragging) return;
            draw(e.offsetX, e.offsetY);
        }
        function out(e) { dragging = false; }

        // 터치 이벤트 처리
        function touchDown(e) {
            e.preventDefault();
            var touch = e.touches[0];
            var rect = canvas.getBoundingClientRect();
            startX = touch.clientX - rect.left;
            startY = touch.clientY - rect.top;
            dragging = true;
        }
        function touchMove(e) {
            e.preventDefault();
            if (!dragging) return;
            var touch = e.touches[0];
            var rect = canvas.getBoundingClientRect();
            draw(touch.clientX - rect.left, touch.clientY - rect.top);
        }
        function touchUp(e) {
            e.preventDefault();
            dragging = false;
        }

        function clearCanvas() {
            context.clearRect(0, 0, canvas.width, canvas.height);
        }
    </script>

</xmp>

<hr>

<h2>canvas 실행후 반환 값</h2>

<ul>
    <li>1. canvas는 HTML5 요소입니다.</li>
    <li>2. canvas는 그래픽을 그리는 요소입니다.</li>
    <li>3. canvas는 JavaScript로 그래픽을 그립니다.</li>
    <li>4. canvas는 그래픽을 그리기 위한 메서드를 제공합니다.</li>

</ul>

<hr>

<div id="toolbar">
    <label for="colorPicker">색상:</label>
    <input type="color" id="colorPicker" value="#000000">
    <label for="lineWidth">선 굵기:</label>
    <input type="range" id="lineWidth" min="1" max="10" value="2">
    <button onclick="clearCanvas()">지우기</button>
</div>

<canvas id="myCanvas" style="background-color:aliceblue" width="400" height="300"></canvas>
<script>
    var canvas, context;
    function init() {
        canvas = document.getElementById("myCanvas");
        context = canvas.getContext("2d");

        context.lineWidth = 2;
        context.strokeStyle = "#000000";

        document.getElementById('colorPicker').addEventListener('change', function(e) {
            context.strokeStyle = e.target.value;
        });

        document.getElementById('lineWidth').addEventListener('input', function(e) {
            context.lineWidth = e.target.value;
        });

        canvas.addEventListener("mousemove", move, false);
        canvas.addEventListener("mousedown", down, false);
        canvas.addEventListener("mouseup", up, false);
        canvas.addEventListener("mouseout", out, false);
        canvas.addEventListener("touchmove", touchMove, false);
        canvas.addEventListener("touchstart", touchDown, false);
        canvas.addEventListener("touchend", touchUp, false);
    }

    var startX = 0, startY = 0;
    var dragging = false;
    function draw(curX, curY) {
        context.beginPath();
        context.moveTo(startX, startY);
        context.lineTo(curX, curY);
        context.stroke();
        startX = curX; startY = curY;
    }
    function down(e) {
        startX = e.offsetX; startY = e.offsetY; dragging = true;
    }
    function up(e) { dragging = false; }
    function move(e) {
        if (!dragging) return;
        draw(e.offsetX, e.offsetY);
    }
    function out(e) { dragging = false; }

    // 터치 이벤트 처리
    function touchDown(e) {
        e.preventDefault();
        var touch = e.touches[0];
        var rect = canvas.getBoundingClientRect();
        startX = touch.clientX - rect.left;
        startY = touch.clientY - rect.top;
        dragging = true;
    }
    function touchMove(e) {
        e.preventDefault();
        if (!dragging) return;
        var touch = e.touches[0];
        var rect = canvas.getBoundingClientRect();
        draw(touch.clientX - rect.left, touch.clientY - rect.top);
    }
    function touchUp(e) {
        e.preventDefault();
        dragging = false;
    }

    function clearCanvas() {
        context.clearRect(0, 0, canvas.width, canvas.height);
    }
</script>


</body>
</html>
