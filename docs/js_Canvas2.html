<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>js_그림판 만들기</title>
    <style>
        #quickColors {
            display: flex;
            align-items: center;
            flex-wrap: wrap;  /* 이 부분을 추가하면 너비를 초과할 경우 줄바꿈 */
            padding: 2px;
            gap: 2px; /* 버튼 사이의 간격을 조정 */
        }
        .colorButton {
            width: 24px; /* 버튼의 크기를 조금 줄임 */
            height: 24px;
            border: none;
            cursor: pointer; /* 버튼에 마우스를 올렸을 때 커서 모양 변경 */
            outline: none; /* 포커스 아웃라인 제거 */
        }
    </style>
    
</head>
<body onload="init()">

<h1>JavaScript - 그림판 만들기</h1>

<ul>
    <li>1. canvas는 HTML5 요소입니다.</li>
    <li>2. canvas는 그래픽을 그리는 요소입니다.</li>
    <li>3. canvas는 JavaScript로 그래픽을 그립니다.</li>
    <li>4. canvas는 그래픽을 그리기 위한 메서드를 제공합니다.</li>
</ul>

<hr>

<h2>canvas 실행 전 코드</h2>

<xmp>
    <style>
        #quickColors {
            display: flex;
            align-items: center;
            flex-wrap: wrap;  /* 이 부분을 추가하면 너비를 초과할 경우 줄바꿈 */
            padding: 2px;
            gap: 2px; /* 버튼 사이의 간격을 조정 */
        }
        .colorButton {
            width: 24px; /* 버튼의 크기를 조금 줄임 */
            height: 24px;
            border: none;
            cursor: pointer; /* 버튼에 마우스를 올렸을 때 커서 모양 변경 */
            outline: none; /* 포커스 아웃라인 제거 */
        }
    </style>
   <div id="toolbar">
    <label for="colorPicker">색상:</label>
    <input type="color" id="colorPicker" value="#000000">
    <label for="lineWidth">선 굵기:</label>
    <input type="range" id="lineWidth" min="1" max="20" value="2" step="0.1">
    
    <button onclick="clearCanvas()">지우기</button>

<!-- 빠른 색상 선택 버튼 (텍스트 없음, 정사각형 모양) -->
<div id="quickColors">
    <button class="colorButton" style="background-color:#FF0000;" onclick="setColor('#FF0000')"></button>
    <button class="colorButton" style="background-color:#FFA500;" onclick="setColor('#FFA500')"></button>
    <button class="colorButton" style="background-color:#FFFF00;" onclick="setColor('#FFFF00')"></button>
    <button class="colorButton" style="background-color:#008000;" onclick="setColor('#008000')"></button>
    <button class="colorButton" style="background-color:#0000FF;" onclick="setColor('#0000FF')"></button>
    <button class="colorButton" style="background-color:#4B0082;" onclick="setColor('#4B0082')"></button>
    <button class="colorButton" style="background-color:#EE82EE;" onclick="setColor('#EE82EE')"></button>
    <button class="colorButton" style="background-color:#A52A2A;" onclick="setColor('#A52A2A')"></button>
    <button class="colorButton" style="background-color:#000000;" onclick="setColor('#000000')"></button>
</div>

</div>

<canvas id="myCanvas" style="background-color:aliceblue" width="400" height="300"></canvas>

<script>
    var canvas, context;
    var startX = 0, startY = 0;
    var dragging = false;
    
    function init() {
        canvas = document.getElementById("myCanvas");
        context = canvas.getContext("2d");
    
        context.lineWidth = document.getElementById('lineWidth').value;
        context.strokeStyle = document.getElementById('colorPicker').value;
    
        document.getElementById('colorPicker').addEventListener('change', function(e) {
            context.strokeStyle = e.target.value;
        });
    
        document.getElementById('lineWidth').addEventListener('input', function(e) {
            context.lineWidth = e.target.value;
        });
    
        canvas.addEventListener("mousemove", move, false);
        canvas.addEventListener("mousedown", down, false);
        canvas.addEventListener("mouseup", up, false);
        canvas.addEventListener("mouseout", out, false);
        canvas.addEventListener("touchmove", touchMove, false);
        canvas.addEventListener("touchstart", touchDown, false);
        canvas.addEventListener("touchend", touchUp, false);
    }
    
    function setColor(color) {
        context.strokeStyle = color;
    }
    
    function draw(curX, curY) {
        if (!dragging) return;
        context.beginPath();
        context.moveTo(startX, startY);
        context.lineTo(curX, curY);
        context.stroke();
        startX = curX;
        startY = curY;
    }
    
    function down(e) {
        startX = e.offsetX;
        startY = e.offsetY;
        dragging = true;
    }
    
    function up(e) {
        dragging = false;
    }
    
    function move(e) {
        draw(e.offsetX, e.offsetY);
    }
    
    function out(e) {
        dragging = false;
    }
    
    function touchDown(e) {
        e.preventDefault();
        var touch = e.touches[0];
        var rect = canvas.getBoundingClientRect();
        startX = touch.clientX - rect.left;
        startY = touch.clientY - rect.top;
        dragging = true;
    }
    
    function touchMove(e) {
        e.preventDefault();
        var touch = e.touches[0];
        var rect = canvas.getBoundingClientRect();
        draw(touch.clientX - rect.left, touch.clientY - rect.top);
    }
    
    function touchUp(e) {
        e.preventDefault();
        dragging = false;
    }
    
    function clearCanvas() {
        context.clearRect(0, 0, canvas.width, canvas.height);
    }
    
    window.onload = init;
    </script>

</xmp>

<hr>

<div id="toolbar">
    <label for="colorPicker">색상:</label>
    <input type="color" id="colorPicker" value="#000000">
    <label for="lineWidth">선 굵기:</label>
    <input type="range" id="lineWidth" min="1" max="20" value="2" step="0.1">
    
    <button onclick="clearCanvas()">지우기</button>

<!-- 빠른 색상 선택 버튼 (텍스트 없음, 정사각형 모양) -->
<div id="quickColors">
    <button class="colorButton" style="background-color:#FF0000;" onclick="setColor('#FF0000')"></button>
    <button class="colorButton" style="background-color:#FFA500;" onclick="setColor('#FFA500')"></button>
    <button class="colorButton" style="background-color:#FFFF00;" onclick="setColor('#FFFF00')"></button>
    <button class="colorButton" style="background-color:#008000;" onclick="setColor('#008000')"></button>
    <button class="colorButton" style="background-color:#0000FF;" onclick="setColor('#0000FF')"></button>
    <button class="colorButton" style="background-color:#4B0082;" onclick="setColor('#4B0082')"></button>
    <button class="colorButton" style="background-color:#EE82EE;" onclick="setColor('#EE82EE')"></button>
    <button class="colorButton" style="background-color:#A52A2A;" onclick="setColor('#A52A2A')"></button>
    <button class="colorButton" style="background-color:#000000;" onclick="setColor('#000000')"></button>
</div>

</div>

<canvas id="myCanvas" style="background-color:aliceblue" width="400" height="300"></canvas>

<script>
    var canvas, context;
    var startX = 0, startY = 0;
    var dragging = false;
    
    function init() {
        canvas = document.getElementById("myCanvas");
        context = canvas.getContext("2d");
    
        context.lineWidth = document.getElementById('lineWidth').value;
        context.strokeStyle = document.getElementById('colorPicker').value;
    
        document.getElementById('colorPicker').addEventListener('change', function(e) {
            context.strokeStyle = e.target.value;
        });
    
        document.getElementById('lineWidth').addEventListener('input', function(e) {
            context.lineWidth = e.target.value;
        });
    
        canvas.addEventListener("mousemove", move, false);
        canvas.addEventListener("mousedown", down, false);
        canvas.addEventListener("mouseup", up, false);
        canvas.addEventListener("mouseout", out, false);
        canvas.addEventListener("touchmove", touchMove, false);
        canvas.addEventListener("touchstart", touchDown, false);
        canvas.addEventListener("touchend", touchUp, false);
    }
    
    function setColor(color) {
        context.strokeStyle = color;
    }
    
    function draw(curX, curY) {
        if (!dragging) return;
        context.beginPath();
        context.moveTo(startX, startY);
        context.lineTo(curX, curY);
        context.stroke();
        startX = curX;
        startY = curY;
    }
    
    function down(e) {
        startX = e.offsetX;
        startY = e.offsetY;
        dragging = true;
    }
    
    function up(e) {
        dragging = false;
    }
    
    function move(e) {
        draw(e.offsetX, e.offsetY);
    }
    
    function out(e) {
        dragging = false;
    }
    
    function touchDown(e) {
        e.preventDefault();
        var touch = e.touches[0];
        var rect = canvas.getBoundingClientRect();
        startX = touch.clientX - rect.left;
        startY = touch.clientY - rect.top;
        dragging = true;
    }
    
    function touchMove(e) {
        e.preventDefault();
        var touch = e.touches[0];
        var rect = canvas.getBoundingClientRect();
        draw(touch.clientX - rect.left, touch.clientY - rect.top);
    }
    
    function touchUp(e) {
        e.preventDefault();
        dragging = false;
    }
    
    function clearCanvas() {
        context.clearRect(0, 0, canvas.width, canvas.height);
    }
    
    window.onload = init;
</script>

</body>
</html>
